import classtest
import it.testmodule

pub fn test() {
    res = true
    temp = testmodule.helloworld()
    if(temp != 1913) {
        print("[Error] Imported function calls not working!\n")
        res = false
    }
    obj = classtest.LinkedList(3)
    try {
        if(obj.mem != 3) {
            print("[Error] Imported call to classtest.LinkedList(3) failed!\n")
            res = false
        }
    } catch(runtime_error e) {
        print("[Error] classtest.LinkedList should have a member named 'mem!'\n")
        print(e.str(), "\n")
        res = false
    }
    if(testmodule.var != 10) {
        print("[Error] Accessing global variable from testmodule failed!\n")
        res = false
    }
    testmodule.var = 20
    if(testmodule.var != 20) {
        print("[Error] Setting global variable from testmodule failed!\n")
        res = false
    }
    while(testmodule.var-- > 10) {}
    if(testmodule.var != 9) {
        print("[Error] Post decrementing global variable from testmodule failed!\n")
        res = false
    }

    ret res
}
